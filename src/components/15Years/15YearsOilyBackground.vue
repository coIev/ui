<template>
	<!-- eslint-disable max-len -->
	<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1268.27 793.15" preserveAspectRatio="xMinYMin slice">
		<path id="mint-small" class="mint" d="M677.55-24.65C704.8-12.12,760.87,27.93,749.18,44S667.76,46.46,624,28.75,537.25-.41,552.78-30.92,642-41,677.55-24.65Z" />
		<path id="sky-extra" class="sky" d="M677.55-24.65C704.8-12.12,760.87,27.93,749.18,44S667.76,46.46,624,28.75,537.25-.41,552.78-30.92,642-41,677.55-24.65Z" />
		<path id="white-knockout-4" class="white" d="M1184.79-13.44c-5.5,13.08-12.4,12-31.29,13.44s-25.06-10-20.34-24.45,22.33-18,37-15.87S1190.29-26.52,1184.79-13.44Z" />
		<path id="mint-large" class="mint" d="M785.46,0C841.16,34.25,948.38,74.66,1039,142.91c84.87,63.92,155.17,152.27,154.93,282.88-.45,233.77-151.78,309.68-191,367.36l-5.26,288.29h483.85v-1421H785.46Z" />
		<path id="twilight-small" class="twilight" d="M677.55-24.65C704.8-12.12,760.87,27.93,749.18,44S667.76,46.46,624,28.75,537.25-.41,552.78-30.92,642-41,677.55-24.65Z" />
		<path id="tomato-extra" class="tomato" d="M677.55-24.65C704.8-12.12,760.87,27.93,749.18,44S667.76,46.46,624,28.75,537.25-.41,552.78-30.92,642-41,677.55-24.65Z" />
		<path id="white-knockout-3" class="white" d="M1184.79-13.44c-5.5,13.08-12.4,12-31.29,13.44s-25.06-10-20.34-24.45,22.33-18,37-15.87S1190.29-26.52,1184.79-13.44Z" />
		<path id="twilight-large" class="twilight" d="M785.46,0C841.16,34.25,948.38,74.66,1039,142.91c84.87,63.92,155.17,152.27,154.93,282.88-.45,233.77-151.78,309.68-191,367.36l-5.26,288.29h483.85v-1421H785.46Z" />
		<path id="sky-medium" class="sky" d="M1184.79-13.44c-5.5,13.08-12.4,12-31.29,13.44s-25.06-10-20.34-24.45,22.33-18,37-15.87S1190.29-26.52,1184.79-13.44Z" />
		<path id="tomato-medium" class="tomato" d="M1184.79-13.44c-5.5,13.08-12.4,12-31.29,13.44s-25.06-10-20.34-24.45,22.33-18,37-15.87S1190.29-26.52,1184.79-13.44Z" />
		<path id="white-knockout" class="white" d="M1184.79-13.44c-5.5,13.08-12.4,12-31.29,13.44s-25.06-10-20.34-24.45,22.33-18,37-15.87S1190.29-26.52,1184.79-13.44Z" />
		<path id="white-knockout-2" class="white" d="M1184.79-13.44c-5.5,13.08-12.4,12-31.29,13.44s-25.06-10-20.34-24.45,22.33-18,37-15.87S1190.29-26.52,1184.79-13.44Z" />
	</svg>
	<!-- eslint-enable max-len -->
</template>

<script>
import { gsap } from 'gsap';
import * as CustomEase from '../../util/animation/CustomEase';
import * as MorphSVGPlugin from '../../util/animation/MorphSVGPlugin';

export default {
	name: 'FifteenYearsOilyBackground',
	mounted() {
		gsap.registerPlugin(MorphSVGPlugin, CustomEase);
		const standardEase = CustomEase.CustomEase.create('custom', 'M0,0,C0.025,0,0.975,1,1,1');
		const createTimeline = (id, path, duration) => {
			let tl = gsap.timeline({ repeat: -1 });
			path.forEach((p, i) => {
				if (i === 1) {
					const p0 = path[0];
					const p1 = p;
					tl = tl.fromTo(id, {
						morphSVG: {
							shape: p0.shape, shapeIndex: 0
						}
					},
					{
						morphSVG: {
							shape: p1.shape, shapeIndex: 0, type: (p.type || 'linear')
						},
						ease: (p1.ease || standardEase),
						duration: duration * p1.position
					});
				} else if (i > 1) {
					const p0 = path[i - 1];
					const p1 = p;
					tl = tl.to(id, {
						morphSVG: {
							shape: p.shape, shapeIndex: 0, type: (p.type || 'linear')
						},
						ease: (p1.ease || standardEase),
						duration: duration * (p.position - p0.position)
					});
				}
			});
			return tl;
		};

		const startingOffset = Math.random();
		const duration = 240;
		this.desktopTimelineDefs.map(p => {
			const tl = createTimeline(`#${p.id}`, p.path, duration);
			tl.seek(duration * ((p.startOffset + startingOffset) % 1));
			// tl.pause();
			return tl;
		});
	},
	data() {
		/* eslint-disable max-len */
		const desktopPaths = {
			bigPath: [
				{ position: 0, shape: 'M155.29,0C379.23,0,640.77-36.1,818.4-126c194.81-98.6,401.81-87.35,530.17,29.42,172.92,157.32,103.18,751.93,45.77,889.73l23.93,295.38,63.25-7.09v-1421L166.73-363Z' },
				{ position: 0.11, shape: 'M395.46,0c37.72,70.15,284.67,39,397.33,52.17,121.29,14.21,270.5,63,398.85,179.81,172.92,157.32,134,423.37,76.63,561.17l150,295.38,63.25-7.09v-1421H435.46Z' },
				{ position: 0.25, shape: 'M785.46,0C841.16,34.25,948.38,74.66,1039,142.91c84.87,63.92,155.17,152.27,154.93,282.88-.45,233.77-151.78,309.68-191,367.36l-5.26,288.29h483.85v-1421H785.46Z' },
				{ position: 0.5, shape: 'M1345.24,0c-17.3,95.18-101.2,231.41-114.58,327.12-14.39,102.88-11.35,175.73-86.93,291.07-108,164.74-280.31,162.47-428.64,175l-40,182.59,837.57,9.85,22.15-1204.68-188.19-3.8Z' },
				{ position: 0.625, shape: 'M1268.85,258.63c-16.2,96.66-59,213.87-138.55,306-53.4,61.89-176.91,124.11-311.86,168.12-127.38,41.54-265,66.86-363.35,60.36V975.74l1057.57,9.85,22.15-394.68v-390Z' },
				{ position: 0.75, shape: 'M1268.27,407.61c-13.06,20-109.71,204.45-260.07,254.28-188.52,62.48-319.3-4.36-404-1.91-164.07,4.74-310.48,95.63-379.09,133.17V988.81L1438.47,969.2V407.61Z' },
				{ position: 1, shape: 'M1304.43,933.15c-47.4,75.19-148.75,88.49-328.56,77.05C777.66,997.58,513.43,848.9,315.48,822.08c-162.64-22-251.79-6.47-320.4,31.07L-122.6,1208.43H1438.47V940.83Z' },
			],
			mediumPath: [
				{ position: 0, shape: 'M1144.79-13.44c-5.5,13.08-12.4,12-31.29,13.44s-25.06-10-20.34-24.45,22.33-18,37-15.87S1150.29-26.52,1144.79-13.44Z' },
				{ position: 0.125, shape: 'M1144.79-13.44c-5.5,13.08-12.4,12-31.29,13.44s-25.06-10-20.34-24.45,22.33-18,37-15.87S1150.29-26.52,1144.79-13.44Z' },
				{ position: 0.25, shape: 'M1335.49,164.35c0,49-22.4,80.07-71.11,85.2-54.85,5.79-82.91-54.1-79.27-106.66,3.38-48.85,38.47-63.75,87.45-63.75S1335.49,115.37,1335.49,164.35Z' },
				{ position: 0.5, shape: 'M1578.82,829.69c51.6,121.53,26.89,295.73-63.68,338.61-153,72.43-115.28-134-162.87-240.53-51.45-115.15-155.48-173.45-55.2-242.12C1409.52,608.64,1546.55,753.71,1578.82,829.69Z' },
				{ position: 0.75, shape: 'M1317.12,428.13c194.91-103,340.78,428.91-57,605.45C874.42,1204.77,662,867.85,874.32,824.19c134.14-27.58,197.42-101.64,251.74-165.64C1181.12,593.68,1254.66,461.13,1317.12,428.13Z', type: 'rotational' },
				{ position: 1, shape: 'M1371.33,913.48c117.69,79.5.41,215.5-153.53,333.61-188,144.22-300.77,178.17-384.88,85.88-77.36-84.88,3.11-217.91,141.32-316.37C1107.9,921.39,1312.8,873.93,1371.33,913.48Z' },
			],
			smallPath: [
				{ position: 0, shape: 'M334.69-.85c0,.66-1,1.19-2.25,1.19s-2.25-.53-2.25-1.19,1-1.51,2.25-1.51S334.69-1.51,334.69-.85Z' },
				{ position: 0.1, shape: 'M334.69-.85c0,.66-1,1.19-2.25,1.19s-2.25-.53-2.25-1.19,1-1.51,2.25-1.51S334.69-1.51,334.69-.85Z' },
				{ position: 0.25, shape: 'M677.55-24.65C704.8-12.12,760.87,27.93,749.18,44S667.76,46.46,624,28.75,537.25-.41,552.78-30.92,642-41,677.55-24.65Z' },
				{ position: 0.5, shape: 'M1313.7,33.1c-2.18,18.53-10.63,37-39,35.38-19.85-1.13-12.4-27.48-8.18-52.81,2.28-13.65,6.68-33.12,19.89-37.33C1301.44-26.43,1318.27-5.74,1313.7,33.1Z' },
				{ position: 0.75, shape: 'M1363.7,223.1c-2.18,18.53-10.63,37-39,35.38-19.85-1.13-12.4-27.48-8.18-52.81,2.28-13.65,6.68-33.12,19.89-37.33C1351.44,163.57,1368.27,184.26,1363.7,223.1Z' },
				{ position: 1, shape: 'M1363.7,223.1c-2.18,18.53-10.63,37-39,35.38-19.85-1.13-12.4-27.48-8.18-52.81,2.28-13.65,6.68-33.12,19.89-37.33C1351.44,163.57,1368.27,184.26,1363.7,223.1Z' },
			],
			extraPath: [
				{ position: 0, shape: 'M709.53-13.56C829.79-41.44,1187.59-20.21,1282.17,0l104,33-31.7-285.36h-623Z' },
				{ position: 0.2, shape: 'M798.66,0c127.75,0,446,78.14,472.82,329.75h150.15V-201h-623Z' },
				{ position: 0.4, shape: 'M1282.17,0c135.07,140.09-18.59,269.17-7.17,666.92l208.09,25.47L1421.63-201H1281.14Z' },
				{ position: 1, shape: 'M1282.17,0c135.07,140.09-18.59,269.17-7.17,666.92l208.09,25.47L1421.63-201H1281.14Z' },
			],
			knockoutPath: [
				{ position: 0, shape: 'M804.69-.85c0,.66-1,1.19-2.25,1.19s-2.25-.53-2.25-1.19,1-1.51,2.25-1.51S804.69-1.51,804.69-.85Z' },
				{ position: 0.125, shape: 'M857.05-.85c0,.66-12.73,1.19-28.43,1.19S800.19-.19,800.19-.85s12.73-1.51,28.43-1.51S857.05-1.51,857.05-.85Z' },
				{ position: 0.25, shape: 'M1077.36-31.79c33.52,17.62,102.55,72.48,88.17,95.08s-109.4,8.35-163.31-16.56S890-.51,909.14-43.42,1033.64-54.78,1077.36-31.79Z' },
				{ position: 0.45, shape: 'M1382.13,258.63c-6.11,23.12-25.71,56.91-74.83,38.37-33-12.44-19.92-48.11-8.71-68.3,8.33-15,16-40.88,40.43-44C1366.78,181.13,1394.93,210.15,1382.13,258.63Z' },
				{ position: 0.75, shape: 'M1363.7,223.1c-2.18,18.53-10.63,37-39,35.38-19.85-1.13-12.4-27.48-8.18-52.81,2.28-13.65,6.68-33.12,19.89-37.33C1351.44,163.57,1368.27,184.26,1363.7,223.1Z' },
				{ position: 1, shape: 'M1363.7,223.1c-2.18,18.53-10.63,37-39,35.38-19.85-1.13-12.4-27.48-8.18-52.81,2.28-13.65,6.68-33.12,19.89-37.33C1351.44,163.57,1368.27,184.26,1363.7,223.1Z' },
			],
			knockoutPath2: [
				{ position: 0, shape: 'M1244.69-.85c0,.66-1,1.19-2.25,1.19s-2.25-.53-2.25-1.19,1-1.51,2.25-1.51S1244.69-1.51,1244.69-.85Z' },
				{ position: 0.2, shape: 'M1314.69-.85c0,.66-1,1.19-2.25,1.19s-2.25-.53-2.25-1.19,1-1.51,2.25-1.51S1314.69-1.51,1314.69-.85Z' },
				{ position: 0.3, shape: 'M1353.14,64.36c-43.65,105.34-59.27,6.68-101.41-41.48-36.88-42.15-145.43-31-70.64-76.39,37.31-22.65,109.19-56.1,148.63-28.72S1369.85,24,1353.14,64.36Z' },
				{ position: 0.375, shape: 'M1426.5,51.64c-8.8,16.83-32.67,39.29-81.32,15-32.67-16.31-15.35-41.55-1.59-55.07,10.21-10,20.88-28.72,46.46-26.28C1457.73-8.23,1432.94,39.32,1426.5,51.64Z' },
				{ position: 1, shape: 'M1396.5,101.64c-8.8,16.83-32.67,39.29-81.32,15-32.67-16.31-15.35-41.55-1.59-55.07,10.21-10,20.88-28.72,46.46-26.28C1427.73,41.77,1402.94,89.32,1396.5,101.64Z' },
			],
		};
		/* eslint-enable max-len */
		return {
			desktopTimelineDefs: [
				{ id: 'mint-large', path: desktopPaths.bigPath, startOffset: 0.75 },
				{ id: 'twilight-large', path: desktopPaths.bigPath, startOffset: 0.25 },
				{ id: 'sky-medium', path: desktopPaths.mediumPath, startOffset: 0.25 },
				{ id: 'tomato-medium', path: desktopPaths.mediumPath, startOffset: 0.75 },
				{ id: 'mint-small', path: desktopPaths.smallPath, startOffset: 0.75 },
				{ id: 'twilight-small', path: desktopPaths.smallPath, startOffset: 0.25 },
				{ id: 'white-knockout', path: desktopPaths.knockoutPath, startOffset: 0.25 },
				{ id: 'white-knockout-2', path: desktopPaths.knockoutPath, startOffset: 0.75 },
				{ id: 'tomato-extra', path: desktopPaths.extraPath, startOffset: 0 },
				{ id: 'sky-extra', path: desktopPaths.extraPath, startOffset: 0.5 },
				{ id: 'white-knockout-3', path: desktopPaths.knockoutPath2, startOffset: 0 },
				{ id: 'white-knockout-4', path: desktopPaths.knockoutPath2, startOffset: 0.5 },
			],
		};
	},
};
</script>

<style lang="scss" scoped>
@import 'settings';
@import 'components/15-years/15-years';

svg {
	position: absolute;
	width: 100%;
	height: 100%;
	pointer-events: none;
}

path.mint {
	fill: $mint;
}

path.twilight {
	fill: $twilight;
}

path.sky {
	fill: $sky;
}

path.tomato {
	fill: $tomato;
}

path.white {
	fill: $offwhite;
}
</style>
